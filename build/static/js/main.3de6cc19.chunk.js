(this["webpackJsonpgoit-react-hw-08-hooks-phonebook"]=this["webpackJsonpgoit-react-hw-08-hooks-phonebook"]||[]).push([[3],{10:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(16),c=n.n(r),a=n(6);c.a.defaults.baseURL="https://connections-api.herokuapp.com";var u=Object(a.c)("contacts/fetchContacts",(function(){return c.a.get("/contacts").then((function(t){return t.data}))})),i=Object(a.c)("contacts/addContact",(function(t){var e={name:t.name,number:t.number,password:t.password};return c.a.post("/contacts",e).then((function(t){return t.data}))})),o=Object(a.c)("contacts/deleteContact",(function(t){return c.a.delete("/contacts/".concat(t)).then((function(t){return t.data}))}))},23:function(t,e,n){t.exports={auth_nav:"AuthNav_auth_nav__2iH2z",link:"AuthNav_link__W3bXE",activeLink:"AuthNav_activeLink__16KdH AuthNav_link__W3bXE"}},27:function(t,e,n){t.exports={link:"Navigation_link__2kxTc",activeLink:"Navigation_activeLink__qViiG Navigation_link__2kxTc"}},35:function(t,e,n){t.exports={user_menu:"UserMenu_user_menu__2igR6",bottom:"UserMenu_bottom__39NZE"}},46:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),c=Object(r.b)("contacts/changeFilter")},50:function(t,e,n){t.exports={container:"Container_container__3_jOR"}},51:function(t,e,n){t.exports={navigation:"AppBar_navigation__3eDLK"}},7:function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return O})),n.d(e,"a",(function(){return f}));var r=n(18),c=n.n(r),a=n(26),u=n(16),i=n.n(u),o=n(6);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var s="Something went wrong. Please, try again",b=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){i.a.defaults.headers.common.Authorization=""},l=Object(o.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/signup",e);case 4:return a=t.sent,u=a.data,b(u.token),t.abrupt("return",u);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(s));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),d=Object(o.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/login",e);case 4:return a=t.sent,u=a.data,b(u.token),t.abrupt("return",u);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(s));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),O=Object(o.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/logout");case 4:j(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(s));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(o.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return b(a),t.prev=5,t.next=8,i.a.get("/users/current");case 8:return u=t.sent,o=u.data,t.abrupt("return",o);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",n.rejectWithValue(s));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},83:function(t,e,n){},87:function(t,e,n){"use strict";n.r(e);var r,c,a,u,i=n(0),o=n.n(i),s=n(20),b=n.n(s),j=n(17),l=n(8),d=n(47),O=(n(60),n(6)),f=n(19),h=n(48),p=n.n(h),v=n(2),g=n(52),x=n(9),k=n(10),m=n(46),_=Object(O.d)([],(r={},Object(v.a)(r,k.c.fulfilled,(function(t,e){return e.payload})),Object(v.a)(r,k.a.fulfilled,(function(t,e){return[e.payload].concat(Object(g.a)(t))})),Object(v.a)(r,k.b.fulfilled,(function(t,e){var n=e.meta;return t.filter((function(t){return t.id!==n.arg}))})),r)),y=Object(O.d)("",Object(v.a)({},m.a,(function(t,e){return e.payload}))),N=Object(O.d)(!1,(c={},Object(v.a)(c,k.c.pending,(function(){return!0})),Object(v.a)(c,k.c.fulfilled,(function(){return!1})),Object(v.a)(c,k.c.rejected,(function(){return!1})),Object(v.a)(c,k.a.pending,(function(){return!0})),Object(v.a)(c,k.a.fulfilled,(function(){return!1})),Object(v.a)(c,k.a.rejected,(function(){return!1})),Object(v.a)(c,k.b.pending,(function(){return!0})),Object(v.a)(c,k.b.fulfilled,(function(){return!1})),Object(v.a)(c,k.b.rejected,(function(){return!1})),c)),L=Object(O.d)(null,(a={},Object(v.a)(a,k.c.rejected,(function(t,e){return e.payload})),Object(v.a)(a,k.c.pending,(function(){return null})),a)),w=Object(x.b)({entities:_,filter:y,isLoading:N,error:L}),C=n(4),U=n(22),A=(n(37),n(7)),T={user:{name:"",email:""},token:null,isLoggedIn:!1,error:null,isGettingCurrentUser:!1},z=Object(O.e)({name:"auth",initialState:T,extraReducers:(u={},Object(v.a)(u,A.d.pending,(function(t){return Object(C.a)(Object(C.a)({},t),{},{error:null})})),Object(v.a)(u,A.d.fulfilled,(function(t,e){var n=e.payload;return Object(C.a)(Object(C.a)({},t),{},{user:n.user,token:n.token,isLoggedIn:!0})})),Object(v.a)(u,A.d.rejected,(function(t,e){var n=e.payload;U.b.error(n)})),Object(v.a)(u,A.b.pending,(function(t){return Object(C.a)(Object(C.a)({},t),{},{error:null})})),Object(v.a)(u,A.b.fulfilled,(function(t,e){var n=e.payload;return Object(C.a)(Object(C.a)({},t),{},{user:n.user,token:n.token,isLoggedIn:!0})})),Object(v.a)(u,A.b.rejected,(function(t,e){var n=e.payload;return U.b.error(n),Object(C.a)(Object(C.a)({},t),{},{error:"\u0447\u0442\u043e-\u0442\u043e"})})),Object(v.a)(u,A.c.pending,(function(t){return Object(C.a)(Object(C.a)({},t),{},{error:null})})),Object(v.a)(u,A.c.fulfilled,(function(t){return Object(C.a)({},T)})),Object(v.a)(u,A.c.rejected,(function(t,e){var n=e.payload;U.b.error(n)})),Object(v.a)(u,A.a.pending,(function(t){return Object(C.a)(Object(C.a)({},t),{},{isGettingCurrentUser:!0})})),Object(v.a)(u,A.a.fulfilled,(function(t,e){var n=e.payload;return Object(C.a)(Object(C.a)({},t),{},{user:n,isLoggedIn:!0,isGettingCurrentUser:!1})})),Object(v.a)(u,A.a.rejected,(function(t){return Object(C.a)(Object(C.a)({},t),{},{isGettingCurrentUser:!1})})),u)}).reducer,W={key:"auth",storage:p.a,whitelist:["token"]},G=Object(O.a)({reducer:{auth:Object(f.g)(W,z),contacts:w},middleware:function(t){return t({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}})},devTools:!1}),I=Object(f.h)(G),S=(n(83),n(5)),V=n(30),E=function(t){return t.auth.isLoggedIn},R=function(t){return t.auth.user.name},B=function(t){return t.auth.isGettingCurrentUser},H=n(1),M=["children","redirectTo"];function D(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object(V.a)(t,M),a=Object(l.c)(E);return Object(H.jsx)(S.b,Object(C.a)(Object(C.a)({},c),{},{children:a?e:Object(H.jsx)(S.a,{to:r})}))}var J=["children","redirectTo","restricted"];function K(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=t.restricted,a=void 0!==c&&c,u=Object(V.a)(t,J),i=Object(l.c)(E),o=a&&i;return Object(H.jsx)(S.b,Object(C.a)(Object(C.a)({},u),{},{children:o?Object(H.jsx)(S.a,{to:r}):e}))}S.a;var X=n(50),q=n.n(X);var F=function(t){var e=t.children;return Object(H.jsx)("div",{className:q.a.container,children:e})},P=n(23),Z=n.n(P),Q=function(){return Object(H.jsxs)("div",{className:Z.a.auth_nav,children:[Object(H.jsx)(j.b,{to:"/register",className:Z.a.link,activeClassName:Z.a.activeLink,children:"Sign Up"}),Object(H.jsx)(j.b,{to:"/login",className:Z.a.link,activeClassName:Z.a.activeLink,children:"Login"})]})},Y=n(27),$=n.n(Y),tt=function(){var t=Object(l.c)(E);return Object(H.jsxs)("nav",{children:[Object(H.jsx)(j.b,{to:"/",exact:!0,className:$.a.link,activeClassName:$.a.activeLink,children:"Home"}),t&&Object(H.jsx)(j.b,{to:"/contacts",className:$.a.link,activeClassName:$.a.activeLink,children:"Contacts"})]})},et=n(35),nt=n.n(et),rt=function(){var t=Object(l.b)(),e=Object(l.c)(R);return Object(H.jsxs)("div",{className:nt.a.user_menu,children:[Object(H.jsxs)("p",{children:["Welcome, ",e]}),Object(H.jsx)("button",{className:nt.a.bottom,type:"button",onClick:function(){return t(Object(A.c)())},children:"Log Out"})]})},ct=n(51),at=n.n(ct),ut=function(){var t=Object(l.c)(E);return Object(H.jsxs)("aside",{className:at.a.navigation,children:[Object(H.jsx)(tt,{}),t?Object(H.jsx)(rt,{}):Object(H.jsx)(Q,{})]})},it=Object(i.lazy)((function(){return n.e(1).then(n.bind(null,104))})),ot=Object(i.lazy)((function(){return n.e(4).then(n.bind(null,105))})),st=Object(i.lazy)((function(){return n.e(2).then(n.bind(null,106))})),bt=Object(i.lazy)((function(){return n.e(0).then(n.bind(null,107))}));var jt=function(){var t=Object(l.b)(),e=Object(l.c)(B);return Object(i.useEffect)((function(){t(Object(A.a)())}),[t]),!e&&Object(H.jsxs)(F,{children:[Object(H.jsx)(ut,{}),Object(H.jsx)(i.Suspense,{fallback:Object(H.jsx)("h1",{children:"LOADING..."}),children:Object(H.jsxs)(S.d,{children:[Object(H.jsx)(K,{exact:!0,path:"/",children:Object(H.jsx)(it,{})}),Object(H.jsx)(K,{path:"/register",restricted:!0,children:Object(H.jsx)(ot,{})}),Object(H.jsx)(K,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(H.jsx)(st,{})}),Object(H.jsx)(D,{path:"/contacts",redirectTo:"/login",children:Object(H.jsx)(bt,{})})]})}),Object(H.jsx)(U.a,{})]})};b.a.render(Object(H.jsx)(o.a.StrictMode,{children:Object(H.jsx)(l.a,{store:G,children:Object(H.jsx)(d.a,{loading:null,persistor:I,children:Object(H.jsx)(j.a,{children:Object(H.jsx)(jt,{})})})})}),document.getElementById("root"))}},[[87,5,6]]]);
//# sourceMappingURL=main.3de6cc19.chunk.js.map